{"enable":true,"acl":"@","sandbox":"{}","src":"/**\n*\n*\n*\n*/\n\nappDIS.controller('profileMenuCtrl', function($scope, $rootScope, User/*, growlService */){\n    var profile = {};\n    \n    $scope.connect = true;\n    $scope.name    = '...';\n    $scope.image   = 'img/profile-pics/unknown.png';\n    \n    function update(){\n      profile = User.profile();\n      console.log('profileMenuCtrl Профиль', profile);\n      $scope.name  = ''+(profile.data.name || profile.login)+((profile.isAdmin)?' (Администратор)':' (Пользователь)');\n      $scope.image = 'img/profile-pics/'+(profile.data.image || 'unknown.png' );\n    }\n    \n    $scope.logout  = function() {\n      User.logout(true);\n    }\n    \n    $rootScope.$on('User.update', function(event, args){update();});\n    $rootScope.$on('User.status', function(event, args){\n      $scope.connect = args.connected;\n      if (args.connected && (!args.session || !args.authorized)) {\n        $scope.connect = false;  \n      }\n    });\n    \n    update();\n    //Welcome Message\n    //growlService.growl('Добро пожаловать '+(profile.data.name || profile.login)+'!', 'inverse')\n});"}